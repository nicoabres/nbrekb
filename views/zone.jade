extends layout

block content
    .row
        .col-md-4
            table.table.table-dark.table-striped
                tbody
                    tr
                        th Zone Name
                        td #{zoneInfo.name}
        
        .col-md-8
            table.table.table-dark.table-hover.table-striped
                thead
                    tr
                        th
                        th Destroyed
                        th Lost
                        th Efficiency
                tbody
                    tr
                        th Bots
                        td #{totalKills + totalLosses}
                        td 0
                        td 100%

    .row
        .col-md-12
            h2 Recent Activity
            table.table.table-dark.table-hover.table-striped
                thead
                    tr
                        th Time
                        th Bot
                        th Zone
                        th Victim
                        th Final Blow
                tbody
                    for kill in kills.docs
                        tr(style="background-color:#77dd7782")
                            td #{moment(kill.date).format('YYYY-MM-DD HH:mm:ss')}
                            td #{kill.robot.name}
                            td #{kill.zone.name}
                            td #{kill.agent.name}
                            -var i = 0
                            each attacker in kill.attackers
                                - i++
                            for attacker in kill.attackers
                                if attacker.hasKillingBlow
                                    td #{attacker._embedded.agent.name} (#{i})
                                        br
                                        | #{attacker._embedded.corporation.name}
                                if attacker.hasKillingBlow == 'undefined'
                                    td No killing blow
                                        br
                                        | Probably an NPC kill
            .row.float-right
                .col-md-12
                    nav.pull-right(aria-label='Page navigation example')
                            ul.pagination
                                if kills.hasPrevPage
                                    li.page-item
                                        a.page-link(href='/zones?id=#{zoneInfo.id}&page=1&limit=10') First
                                    li.page-item
                                        a.page-link(href='/zones?id=#{zoneInfo.id}&page=#{kills.page - 1}&limit=10') <<
                                if kills.page >= 4
                                    li.page-item
                                        a.page-link(href='/zones?id=#{zoneInfo.id}&page=#{kills.page - 3}&limit=10') #{kills.page - 3}
                                if kills.page >= 3
                                    li.page-item
                                        a.page-link(href='/zones?id=#{zoneInfo.id}&page=#{kills.page - 2}&limit=10') #{kills.page - 2}
                                if kills.page >= 2
                                    li.page-item
                                        a.page-link(href='/zones?id=#{zoneInfo.id}&page=#{kills.page - 1}&limit=10') #{kills.page - 1}
                                li.page-item.active
                                    a.page-link(href='/zones?id=#{zoneInfo.id}&page=#{kills.page}&limit=10') #{kills.page}
                                if kills.page <= kills.totalPages - 1
                                    li.page-item
                                        a.page-link(href='/zones?id=#{zoneInfo.id}&page=#{kills.page + 1}&limit=10') #{kills.page + 1}
                                if kills.page <= kills.totalPages - 2
                                    li.page-item
                                        a.page-link(href='/zones?id=#{zoneInfo.id}&page=#{kills.page + 2}&limit=10') #{kills.page + 2}
                                if kills.page <= kills.totalPages - 3
                                    li.page-item
                                        a.page-link(href='/zones?id=#{zoneInfo.id}&page=#{kills.page + 3}&limit=10') #{kills.page + 3}
                                if kills.hasNextPage
                                    li.page-item
                                        a.page-link(href='/zones?id=#{zoneInfo.id}&page=#{kills.page + 1}&limit=10') >>
                                    li.page-item
                                        a.page-link(href='/zones?id=#{zoneInfo.id}&page=#{kills.totalPages}&limit=10') Last
                    p Total Kills: #{kills.totalDocs}