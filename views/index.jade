extends layout

block content
  h2 Recent Activity
  table.table.table-dark.table-hover.table-striped
    thead
      tr
        th Time
        th Bot
        th Zone
        th Victim
        th Final Blow
    tbody
      for kill in kills.docs
          tr
            td #{moment(kill.date).format('YYYY-MM-DD HH:mm:ss')}
            td
              a(href='/robots?id=#{kill.robot.id}') #{kill.robot.name}
            td 
              a(href='/zones?id=#{kill.zone.id}') #{kill.zone.name}
            td 
              a(href='/agents?id=#{kill.agent.id}') #{kill.agent.name}
            -var i = 0
            each attacker in kill.attackers
              - i++
            for attacker in kill.attackers
              if attacker.hasKillingBlow
                td
                  a(href='/agents?id=#{attacker._embedded.agent.id}') #{attacker._embedded.agent.name} (#{i})
                  br
                  a(href='/corporations?id=#{attacker._embedded.corporation.id}') #{attacker._embedded.corporation.name}
  nav.pull-right(aria-label='Page navigation example')
      ul.pagination
        if kills.hasPrevPage
          li.page-item
            a.page-link(href='/?page=1&limit=10') First
          li.page-item
            a.page-link(href='/?page=#{kills.page - 1}&limit=10') <<
        if kills.page >= 4
          li.page-item
            a.page-link(href='/?page=#{kills.page - 3}&limit=10') #{kills.page - 3}
        if kills.page >= 3
          li.page-item
            a.page-link(href='/?page=#{kills.page - 2}&limit=10') #{kills.page - 2}
        if kills.page >= 2
          li.page-item
            a.page-link(href='/?page=#{kills.page - 1}&limit=10') #{kills.page - 1}
        li.page-item.active
          a.page-link(href='/?page=#{kills.page}&limit=10') #{kills.page}
        if kills.page <= kills.totalPages - 1
          li.page-item
            a.page-link(href='/?page=#{kills.page + 1}&limit=10') #{kills.page + 1}
        if kills.page <= kills.totalPages - 2
          li.page-item
            a.page-link(href='/?page=#{kills.page + 2}&limit=10') #{kills.page + 2}
        if kills.page <= kills.totalPages - 3
          li.page-item
            a.page-link(href='/?page=#{kills.page + 3}&limit=10') #{kills.page + 3}
        if kills.hasNextPage
          li.page-item
            a.page-link(href='/?page=#{kills.page + 1}&limit=10') >>
          li.page-item
            a.page-link(href='/?page=#{kills.totalPages}&limit=10') Last
  p Total Kills: #{kills.totalDocs}